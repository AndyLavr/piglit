[require]
GL ES >= 2.0
GLSL ES >= 1.00

[vertex shader]

attribute vec4 piglit_vertex;

void main()
{
        gl_Position = piglit_vertex;
}

[fragment shader]
#version 100
precision mediump float;

uniform float arg0;
uniform float tolerance;
uniform float expected;

void main()
{
  float result = 1.0 / arg0;
  gl_FragColor = distance(result, expected) <= tolerance ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, result / 2.0, 1.0);
}

[test]
clear color 0.0 0.0 1.0 0.0
clear
uniform float arg0 2.0
uniform float expected 0.5
uniform float tolerance 1e-5
draw rect ortho 0 0 4 4
uniform float arg0 3.0
uniform float expected 0.333333333333333
uniform float tolerance 1e-3
draw rect ortho 4 0 4 4
uniform float arg0 0.125
uniform float expected 8
uniform float tolerance 1e-2
draw rect ortho 8 0 4 4
probe rect rgba (0, 0, 4, 4) (0.0, 1.0, 0.0, 1.0)
probe rect rgba (4, 0, 4, 4) (0.0, 1.0, 0.0, 1.0)
probe rect rgba (8, 0, 4, 4) (0.0, 1.0, 0.0, 1.0)
