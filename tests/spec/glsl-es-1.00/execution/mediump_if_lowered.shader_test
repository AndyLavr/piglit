# Tests that a div operation involving mediump as the condition
# expression of an if-statement is done using lowered precision. Note
# that doing the operation in a higher precision is valid according to
# the spec so this test canâ€™t be used in production. It is only for
# development.

[require]
GL ES >= 2.0
GLSL ES >= 1.00

[vertex shader passthrough]

[fragment shader]
#version 100
precision mediump float;

uniform float a, b;

void
main()
{
	if (fract(a / b * 1024.0) < 0.31)
		gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
	else
		gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}

[test]

uniform float a 1.0
uniform float b 3.0

draw rect -1 -1 2 2
probe all rgba 0.0 1.0 0.0 1.0
