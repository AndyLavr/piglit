[require]
GL >= 3.3
GLSL >= 3.30
GL_ARB_gl_spirv

[compute shader]
#version 450

layout (local_size_x = 1, local_size_y = 1, local_size_z = 1) in;

layout (binding = 3, offset = 24) uniform atomic_uint auival;
layout (binding = 2) uniform atomic_uint auival2;
layout (binding = 1) buffer b {
  uint val;
  uint val2;
} out_buffer;

void main()
{
    uint uival = atomicCounterIncrement(auival);
    uint uival2 = atomicCounterIncrement(auival2) +
                  atomicCounterDecrement(auival2) +
                  atomicCounter(auival2);

    out_buffer.val = uival;
    out_buffer.val2 = uival2;
}

[test]
atomic counter buffer 3 7
atomic counter buffer 2 1
atomic counter 3 6 5
atomic counter 2 0 3
ssbo 1 8
compute 1 1 1
probe atomic counter buffer 3 20 == 0
probe atomic counter buffer 3 24 == 6
probe atomic counter buffer 2 0 == 3
probe ssbo uint 1 0 == 5
probe ssbo uint 1 4 == 9
